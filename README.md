# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Описание классов и компонентов

## Классы модели данных

### AppState (Состояние приложения)

Отслеживает состояние всего приложения.

**Свойства:**
- `catalog`: Список доступных лотов.
- `basket`: Лоты в корзине.
- `order`: Состояние заказа.
- `preview`: Лот для модального окна.

**Методы:**
- `isLotInBasket(item)`: Проверка наличия лота в корзине.
- `clearBasket()`: Очистка корзины.
- `getTotalAmount()`: Получение общей стоимости корзины.
- `getBasketIds()`: Получение списка индексов в корзине.
- `getBasketLength()`: Получение количества товаров в корзине.
- `initOrder()`: Инициализация объекта заказа.

### LotItem (Элемент лота)

Данные отдельной карточки товара.

**Свойства:**
- `id`: Идентификатор лота.
- `title`: Название лота.
- `description`: Описание лота.
- `image`: Путь до изображения лота.
- `category`: Категория лота.
- `price`: Цена лота.
- `isOrdered`: Флаг наличия лота в заказе.

**Методы:**
- `placeInBasket()`: Добавление лота в корзину.
- `removeFromBasket()`: Удаление лота из корзины.

### Order (Заказ)

Данные процесса оформления заказа.

**Свойства:**
- `payment`: Способ оплаты.
- `address`: Адрес доставки.
- `email`: Почта для связи.
- `phone`: Телефон для связи.
- `items`: Лоты в заказе.
- `formErrors`: Ошибки формы.

**Методы:**
- `validateOrder()`: Проверка полей формы заказа.
- `clearOrder()`: Обнуление полей заказа.
- `validatePayment()`: Проверка способа оплаты.
- `validateAddress()`: Проверка адреса доставки.
- `validateEmail()`: Проверка почты.
- `validatePhone()`: Проверка телефона.
- `postOrder()`: Завершение заказа.

## Компоненты представления

### Page (Страница)

Отображение всей страницы.

**Свойства:**
- `counter`: Элемент отображения количества товаров в корзине.
- `gallery`: Элемент отображения всех доступных карточек.
- `wrapper`: Обёртка для блокировки прокрутки страницы при открытии модального окна.
- `basket`: Кнопка для отображения корзины.

**События:**
- `basket:open`: Открытие корзины.

### Modal (Модальное окно)

Отображение модального окна.

**Свойства:**
- `content`: Внутреннее содержание модального окна.
- `closeButton`: Кнопка закрытия модального окна.

**События:**
- `modal:close`: Закрытие модального окна.

### Basket (Корзина)

Отображение корзины.

**Свойства:**
- `list`: Список отображаемых элементов в корзине.
- `total`: Общая ценность корзины.
- `button`: Кнопка открытия формы оформления заказа.

**События:**
- `order_payment:open`: Открытие формы оформления заказа.

### Card (Карточка товара)

Отображение элементов корзины.

### BasketItem (Элемент корзины)

Отображение отдельных элементов в корзине.

### Form (Форма)

Базовая форма.

**Свойства:**
- `submit`: Кнопка отправки формы.
- `errors`: Блок отображения ошибок в форме.

**События:**
- `container.field:change`: Изменение значения в поле формы.
- `container:submit`: Отправка формы.

### DeliveryForm (Форма доставки)

Форма оформления заказа с информацией об оплате и доставке.

**Свойства:**
- `payment`: Способ оплаты.
- `address`: Адрес доставки.

### ContactsForm (Форма контактов)

Форма оформления заказа с контактной информацией.

**Свойства:**
- `email`: Почта для связи.
- `phone`: Телефон для связи.

### Success (Успешное завершение заказа)

Отображение информации об оформленном заказе.

## Внешние связи

### LarekAPI

Взаимодействие с конкретным API-сервером.

**Методы:**
- `getLotItem`: Получение информации по конкретному лоту.
- `getLotList`: Получение информации по всем доступным лотам.
- `postOrderLots`: Оформление заказа через запрос на сервер.

## Ключевые типы данных

### Модель лота (ILot)

```typescript
interface ILot {
	id: string;
	title: string;
	description: string;
	image: string;
	category: ILotCategory;
	price: number;
	isOrdered: boolean;
	placeInBasket: () => void;
	removeFromBasket: () => void;
}
